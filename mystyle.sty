\usepackage[top=30mm, bottom=30mm, inner=36mm, outer=18mm, footskip = 15mm]{geometry}
%\usepackage[paperwidth=169mm, paperheight=239mm, top=30mm, bottom=30mm, voffset=-1in + 15mm, inner=36mm, outer=18mm, footskip = 15mm]{geometry}

% Use this to show margins
%\usepackage{showframe}
%\usepackage{layouts}

\usepackage[toc,page]{appendix}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{color}
\usepackage{graphics}
\usepackage{graphicx}
\usepackage{epsfig}
\usepackage{epstopdf}
\epstopdfsetup{update}
\usepackage{float}
\usepackage{caption}
\usepackage{rotating}
\usepackage{array}
\usepackage{textcomp}
\usepackage{bbm}
\usepackage{fancyref}
\usepackage{xcolor}
\usepackage{rotating}
\usepackage[noadjust]{cite} % basic fos bibliography [1]-[5]
\usepackage{bm}
\usepackage{mathtools}
\usepackage{multirow}
\usepackage{multicol}
\usepackage{subfigure}
\usepackage{array}
\usepackage{longtable}
\usepackage{hhline}
\usepackage{indentfirst}
\usepackage{framed}
\usepackage[hidelinks, pdfencoding=auto, psdextra]{hyperref}
\usepackage{refcount}
\usepackage{bookmark}
\usepackage{cleveref}
\usepackage{autonum}
\usepackage[many]{tcolorbox}
\tcbuselibrary{breakable}
\usepackage{pgfplots}
\usepackage{pstricks}
\usepackage{pspicture}
\usepackage{tikz}
\usetikzlibrary{calc,positioning,shapes,shadows,arrows,fit}
\usepackage{tkz-euclide}
\usetkzobj{all}
\usepackage{fancyhdr}
%\pagestyle{fancy}
%\usepackage{auto-pst-pdf}

% CHAPTERS
\usepackage{fix-cm}
\usepackage{titlesec}
\definecolor{gray75}{gray}{0.75}
\newcommand{\hsp}{\hspace{0pt}}
\titleformat{\chapter}[hang]{\flushright
\fontseries{b}\fontsize{80}{100}\selectfont}{\fontseries{b}\fontsize{100}{130}\selectfont \textcolor{gray75}\thechapter\hsp}{0pt}{\\ \Huge\bfseries}[]

\widowpenalty=1000
\clubpenalty=1000


\usepackage[all,defaultlines=3]{nowidow}

% Inline equations do not split with this
\binoppenalty=\maxdimen
\relpenalty=\maxdimen

\usepackage{environ}
\NewEnviron{gg_box}{%
  \begin{tcolorbox}[colback=black!5, colframe=white!80!, breakable]
  %\begin{tcolorbox}[colback=white!10, colframe=black!30!, breakable]
    \BODY
  \end{tcolorbox}
}

\NewEnviron{bw_box}{%
  \begin{tcolorbox}[colback=white!10, colframe=black!80!, arc=0pt,outer arc=0pt, breakable]
    \BODY
  \end{tcolorbox}
}

\NewEnviron{gw_box}{%
  \begin{tcolorbox}[colback=white!10, colframe=black!10!, breakable]
    \BODY
  \end{tcolorbox}
}

\NewEnviron{bg_box}{%
  \begin{tcolorbox}[colback=black!10, colframe=black!80!, arc=0pt,outer arc=0pt, breakable]
    \BODY
  \end{tcolorbox}
}



%\usepackage{fontspec}
%\setmainfont{cmr12}


%\usepackage{algorithm}
%\usepackage{algpseudocode}
%\usepackage{algcompatible}
%\usepackage{pifont}
%\usepackage[]{algorithm2e}
%\usepackage{stmaryrd}
%\usepackage{subcaption}


\theoremstyle{definition}
\newtheorem{definition}{Definition}[section] %definition
\newtheorem{remark}{Remark}[section] % remark
\newtheorem{theorem}{Theorem}[section] % theorem
\newtheorem{example}{Example}[section] % example
\newtheorem{assumption}{Assumption}[section] % example
\newtheorem{problem}{Problem}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{property}{Property}[section]

%\newtheorem{theorem}{Theorem}[section] % theorem


\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash}m{#1}}

\makeatletter
\def\BState{\State\hskip-\ALG@thistlm}
\makeatother

\newcommand{\note}[1]{{\color{red}  #1}}
\newcommand{\mat}[1]{\bm{\mathit{#1}}}
\newcommand{\vect}[1]{\bm{\mathbf{#1}}}

% Concludes proof
\renewcommand{\qedsymbol}{\hfill$\blacksquare$}
%\hypersetup{colorlinks=false, linkbordercolor={0 0 1}}

\newcommand{\newevenside}{
	\ifthenelse{\isodd{\thepage}}{\newpage}{
	\newpage
    \phantom{placeholder} % doesn't appear on page
	\thispagestyle{empty} % if want no header/footer
	\newpage
	}
}


\usepackage{setspace}
\doublespacing

%\mathtoolsset{showonlyrefs=true}


% Redefines cleardoublepage so as to remove headers/footers
\makeatletter
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
\hbox{}
\vspace*{\fill}
\begin{center}
%This page intentionally left
\end{center}
\vspace{\fill}
\thispagestyle{empty}
\newpage
\if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother

\raggedbottom

% allows a break to occur anywhere
\allowdisplaybreaks
