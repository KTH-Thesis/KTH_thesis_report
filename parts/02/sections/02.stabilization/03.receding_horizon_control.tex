\subsection{Nonlinear Receding Horizon}

Consider a sequence of sampling times $\{t_k\}_{k \geq 0}$, with a constant
sampling time $0 < h < T_p$, where $T_p$ is the finite time-horizon, such that
$t_{k+1} = t_k + h$. In sampling data NMPC, a finite-horizon open-loop optimal
control problem (OCP) is solved at discrete sampling time instants $t_k$
based on the current state error measurement $\vect{e}_i(t_k)$. The solution
is an optimal control signal $\vect{u}_i^{\star}(t)$, computed over
$t \in [t_k, t_k+T_p]$. This signal is applied to the open-loop system in
between sampling times $t_k$ and $t_k + h$.

The applied input signal is a
portion of the optimal solution to an optimization problem where information on
the states of the neighbouring agents of agent $i$ are taken into account only
in the constraints considered in the optimization problem. These constraints
pertain to the set of its neighbours $\mathcal{N}_i$ and, in total, to the
set of all agents within its sensing range $\mathcal{R}_i$. Regarding these, we
make the following assumption:

\begin{gg_box}
\begin{assumption}
Considering the context of Receding Horizon Control, when
at time $t_k$ agent $i$ solves a finite horizon optimization problem, it has
access to\footnote{Although
  $\mathcal{N}_i \subseteq \mathcal{R}_i$, we make the distinction between
  the two because all agents $j \in \mathcal{R}_i$ need to avoid collision
  with agent $i$, but only agents $j' \in \mathcal{N}_i$ need to remain
  within the sensing range of agent $i$. The distinction will prove the
  justification of its existence when considering the state constraints
  in the subsequent declaration of the optimization problem.}

\begin{enumerate}
  \item measurements of the states
    \begin{itemize}
      \item $\vect{z}_j(t_k)$ of all agents $j \in \mathcal{R}_i(t_k)$ within its sensing range at time $t_k$
      \item $\vect{z}_{j'}(t_k)$ of all of its neighbouring agents $j' \in \mathcal{N}_i$ at time $t_k$
      \end{itemize}
    \item the \textit{predicted states}
      \begin{itemize}
        \item $\overline{\vect{z}}_j(\tau)$ of all agents $j \in \mathcal{R}_i(t_k)$ within its sensing range
        \item $\overline{\vect{z}}_{j'}(\tau)$ of all of its neighbouring agents $j' \in \mathcal{N}_i$
      \end{itemize}
      across the entire horizon $\tau \in [t_k + h, t_k + T_p]$, where $T_p$ is the
      set time-horizon and $h$ is the sampling time.
\end{enumerate}
\end{assumption}
\end{gg_box}
We assume that these pieces of information are (a) always available and
accurate, and (b) exchanged without delay. We encapsulate these pieces of
information in four stacked vectors:
\begin{subequations}
\begin{align}
  \vect{z}_{\mathcal{R}_i}(t_k) &\triangleq col[\vect{z}_j(t_k)], \forall j \in \mathcal{R}_i(t_k) \\
  \vect{z}_{\mathcal{N}_i}(t_k) &\triangleq col[\vect{z}_j(t_k)], \forall j \in \mathcal{N}_i \\
  \overline{\vect{z}}_{\mathcal{R}_i}(\tau) &\triangleq col[\overline{\vect{z}}_j(\tau)], \forall j \in \mathcal{R}_i(t_k), \tau \in [t_k, t_k + T_p] \\
  \overline{\vect{z}}_{\mathcal{N}_i}(\tau) &\triangleq col[\overline{\vect{z}}_j(\tau)], \forall j \in \mathcal{N}_i, \tau \in [t_k, t_k + T_p]
\end{align}
\end{subequations}

The set $\mathcal{Z}_i$ captures all the state constraints of the system's
dynamics posed by the problem \eqref{problem}, not only for time $t_k$, but
over the entire prediction horizon $t \in [t_k, t_k + T_p]$.
Therefore $\mathcal{Z}_i$ is such that:
\begin{align}
  \mathcal{Z}_i = \{\overline{\vect{z}}_i \in \mathbb{R}^{9}\times \mathbb{T}^3 : \
      & \|\overline{\vect{p}}_i(t) - \overline{\vect{p}}_j(t)\| > \underline{d}_{ij,a}, \forall j \in \mathcal{R}_i(t), \label{constraint:p_1}\\
      & \|\overline{\vect{p}}_i(t) - \overline{\vect{p}}_j(t)\| < d_i, \forall j \in \mathcal{N}_i, \\
      & \|\overline{\vect{p}}_i(t) - \vect{p}_{\ell}\| > \underline{d}_{i\ell,o}, \forall \ell \in \mathcal{L}, \\
      & \|\vect{p}_W - \overline{\vect{p}}_i(t)\| < \overline{d}_{i,W}, \\
      & - \frac{\pi}{2} < \overline{\theta}_i(t) < \frac{\pi}{2} \label{constraint:p_5}, \\
  &\forall t \in [t_k, t_k + T_p]\}
\end{align}

\begin{gg_box}
Considering that $\mathcal{N}_i \subseteq \mathcal{R}_i$, that the state
vectors $\vect{z}_j$ are comprised of 12 real numbers that are encoded by
4 bytes, and that sampling occurs with a frequency $f$ for all agents, the
overall downstream bandwidth required by each agent is
$$BW_d = 12 \times 32\ \text{[bits]} \times |\mathcal{R}_i| \times \dfrac{T_p}{h} \times f\ [\text{sec}^{-1}]$$
Given conservative constants $f = 100$ Hz, $\dfrac{T_p}{h} = 100$, the
wireless protocol IEEE 802.11n-2009 (a standard for present-day devices)
can accomodate

$$|\mathcal{R}_i| = \dfrac{600\ [\text{Mbit}\cdot \text{sec}^{-1}] }{12\times32[\text{bit}]\times10^4 [\text{sec}^{-1}]} \approx
16 \cdot 10^2 \text{ agents}$$ within the range of one agent.
We deem this number to be large enough for practical applications
for the approach of assuming access to the predicted states of agents
within the range of one agent to be legal.
\end{gg_box}

In order to translate
the constraints that are dictated for the state $\vect{z}_i$ into constraints
regarding the error dynamics, we define the set
$\mathcal{E}_i \subset \mathbb{R}^9 \times \mathbb{T}^3$ as:
$$\mathcal{E}_i = \{\vect{e}_i \in \mathbb{R}^9 \times \mathbb{T}^3 :
\vect{e}_i \in \mathcal{Z}_i \oplus (-z_{i,des} )\}$$
as the set that captures all constraints of the error dynamics
\eqref{eq:position_based_error_model}.

If we design control laws $\vect{u}_i \in \mathcal{U}_i$,
$\forall i \in \mathcal{V}$ such that the error signal $\vect{e}_i(t)$ with
dynamics given in \eqref{eq:position_based_error_model}, constrained under
$\vect{e}_i(t) \in \mathcal{E}_i$, satisfies
$\lim\limits_{t \to \infty} \|\vect{e}_i(t)\| = 0$, while all system related
signals remain bounded in their respective regions,$-$ if all of these are
achieved, then problem \eqref{problem} has been solved.

